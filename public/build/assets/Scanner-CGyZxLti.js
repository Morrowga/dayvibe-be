import{k as u,m as B,r as N,f as r,a as h,u as Q,w as f,F as S,o as a,Z as T,b as e,n as F,g as l,q as U,B as j,z as E,t as n,d as q,C as z,D as O,c as $}from"./app-D7svo1g6.js";import{_ as A}from"./AuthenticatedLayout-4SzMzbKh.js";const I={class:"py-12"},H={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},L={class:"p-6"},J={class:"flex space-x-4"},Z={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},G={key:1,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6"},X={class:"flex space-x-4"},Y={class:"flex-1"},ee={class:"flex items-end"},te=["disabled"],se={key:0,class:"mt-4 p-4 bg-green-50 border border-green-200 rounded"},oe={key:2,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ae={class:"p-6"},re={class:"p-4 bg-red-100 border border-red-400 text-red-700 rounded"},de={key:3,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},le={class:"p-6"},ne={class:"bg-gray-50 p-4 rounded border"},ie={class:"flex justify-between items-start"},ue={class:"flex-1"},ce={class:"font-mono text-sm bg-white p-2 rounded border break-all"},me={class:"flex-1 mx-3"},ge={class:"font-mono text-sm bg-white p-2 rounded border break-all"},ve={key:4,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},be={class:"p-6"},pe={class:"bg-gray-50 p-4 rounded border"},fe={class:"flex justify-between items-start"},he={style:{height:"120px"}},xe=["src"],ye={key:5,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},we={class:"p-6"},_e={class:"bg-gray-50 p-4 rounded border"},ke={class:"flex justify-between items-start"},Ce={class:"flex-1"},Ne={class:"font-mono text-sm bg-white p-2 rounded border break-all"},Se={key:0,class:"font-mono bg-white p-2 rounded border break-all mt-3",style:{color:"green !important"}},Fe={class:"w-full md:w-2/2"},Oe=["disabled"],Ve=["disabled"],De={key:6,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Me={class:"p-6"},Pe={class:"bg-green-50 p-4 rounded border border-green-200"},Re={class:"flex justify-between items-start"},Be={class:"flex-1"},Qe={class:"font-mono text-sm bg-white p-2 rounded border break-all"},Ee={__name:"Scanner",setup(Te){const V=u(!1),g=u(!1),b=u(!1),d=u(""),o=u([]),i=u("upload"),c=u(""),v=u(!1);B(()=>{const t=new URLSearchParams(window.location.search).get("code");t&&t.trim()!==""&&(i.value="find",c.value=t.trim(),o.value=[],d.value="")});const x=s=>{i.value=s,p()},y=async()=>{if(!c.value.trim()){d.value="Please enter a code number";return}v.value=!0,d.value="";try{const s=new FormData;s.append("mode","find"),s.append("code",c.value.trim());const t=await O.post("/api/scanner",s,{headers:{"Content-Type":"multipart/form-data"}});o.value=t.data}catch(s){if(s.response)if(s.response.data.errors){const t=s.response.data.errors;d.value=t.code?t.code[0]:t.general||"Failed to find order"}else d.value=s.response.data.message||"Order not found";else d.value="Network error occurred";console.error("Search error:",s)}finally{v.value=!1}},D=async()=>{g.value=!0;try{const s=new FormData;s.append("data",JSON.stringify(o.value.data)),s.append("code",o.value.code);const t=await O.post("/api/qr-order",s,{headers:{"Content-Type":"multipart/form-data"}});b.value="Order is success",setTimeout(()=>{p()},3e3),console.log(t)}catch(s){console.error("Upload error:",s)}finally{g.value=!1}},p=()=>{c.value="",o.value=[],b.value="",d.value=""};return(s,t)=>{const M=N("VCol"),P=N("VRow");return a(),r(S,null,[h(Q(T),{title:"QR Code Management"}),h(A,null,{header:f(()=>t[4]||(t[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"QR Code Management",-1)])),default:f(()=>{var w,_,k,C;return[e("div",I,[e("div",H,[e("div",K,[e("div",L,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Action",-1)),e("div",J,[e("button",{onClick:t[0]||(t[0]=m=>x("upload")),class:F(["px-6 py-3 rounded-lg font-medium transition duration-200",i.value==="upload"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])}," 📷 Upload QR Code ",2),e("button",{onClick:t[1]||(t[1]=m=>x("find")),class:F(["px-6 py-3 rounded-lg font-medium transition duration-200",i.value==="find"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])}," 🔍 Find by Code Number ",2)])])]),i.value==="upload"?(a(),r("div",Z,t[6]||(t[6]=[e("div",{class:"p-6"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Upload QR Code Image"),e("div",{class:"border-2 border-dashed border-gray-200 rounded-lg p-12 text-center"},[e("div",{class:"text-gray-400"},[e("svg",{class:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M12 4v16m8-8H4"})]),e("p",{class:"text-lg"},"Upload functionality temporarily disabled"),e("p",{class:"text-sm mt-2"},'Please use "Find by Code Number" instead')])])],-1)]))):l("",!0),i.value==="find"?(a(),r("div",G,[e("div",W,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Find Order by Code Number",-1)),e("div",X,[e("div",Y,[t[7]||(t[7]=e("label",{for:"codeNumber",class:"block text-sm font-medium text-gray-700 mb-2"}," Enter Code Number ",-1)),U(e("input",{id:"codeNumber","onUpdate:modelValue":t[2]||(t[2]=m=>c.value=m),type:"text",placeholder:"Enter order code number...",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",onKeyup:E(y,["enter"])},null,544),[[j,c.value]])]),e("div",ee,[e("button",{onClick:y,disabled:v.value||!c.value.trim(),class:"bg-green-500 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-2 px-6 rounded transition duration-200"},n(v.value?"Searching...":"Search"),9,te)])]),v.value?(a(),r("div",se,t[8]||(t[8]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"animate-spin h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-green-700"},"Searching for order...")],-1)]))):l("",!0)])])):l("",!0),d.value?(a(),r("div",oe,[e("div",ae,[e("div",re,[t[10]||(t[10]=e("strong",null,"Error:",-1)),q(" "+n(d.value),1)])])])):l("",!0),o.value&&o.value.data?(a(),r("div",de,[e("div",le,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"QR Code Data",-1)),e("div",ne,[e("div",ie,[e("div",ue,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total Quantity:",-1)),e("p",ce,n(((_=(w=o.value)==null?void 0:w.data)==null?void 0:_.tq)??0),1)]),e("div",me,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total Amount:",-1)),e("p",ge,n(((C=(k=o.value)==null?void 0:k.data)==null?void 0:C.ta)??0),1)])])])])])):l("",!0),o.value?(a(),r("div",ve,[e("div",be,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Order Items",-1)),e("div",pe,[e("div",fe,[h(P,null,{default:f(()=>[(a(!0),r(S,null,z(o.value.items,(m,R)=>(a(),$(M,{cols:"6",sm:"12",lg:"2",key:R},{default:f(()=>[e("div",he,[e("img",{src:m.img,style:{width:"100px",height:"auto"},alt:""},null,8,xe)]),e("p",null,"Quantity - "+n(m.quantity),1)]),_:2},1024))),128))]),_:1})])])])])):l("",!0),o.value&&o.value.data&&i.value==="upload"?(a(),r("div",ye,[e("div",we,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Order Process",-1)),e("div",_e,[e("div",ke,[e("div",Ce,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600 mb-1"},"Serial Number:",-1)),e("p",Ne,n(o.value.code),1),b.value!=""?(a(),r("p",Se,n(b.value),1)):l("",!0),e("div",Fe,[e("button",{onClick:t[3]||(t[3]=m=>D()),disabled:g.value,class:"bg-blue-500 hover:bg-blue-700 w-full mt-2 disabled:bg-gray-400 text-white font-bold py-2 px-4 rounded transition duration-200"},n(g.value?"Processing...":"Process Order"),9,Oe),e("button",{onClick:p,disabled:V.value||g.value,class:"bg-gray-500 hover:bg-gray-700 w-full mt-2 disabled:bg-gray-400 text-white font-bold py-2 px-4 rounded transition duration-200"}," Clear ",8,Ve)])])])])])])):l("",!0),o.value&&o.value.data&&i.value==="find"?(a(),r("div",De,[e("div",Me,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Found Order Information",-1)),e("div",Pe,[e("div",Re,[e("div",Be,[t[17]||(t[17]=e("p",{class:"text-sm text-gray-600 mb-1"},"Order Code:",-1)),e("p",Qe,n(o.value.code),1),t[18]||(t[18]=e("p",{class:"font-mono bg-green-100 p-2 rounded border break-all mt-3 text-green-800"}," ✅ Order already exists in the system ",-1)),e("div",{class:"w-full md:w-2/2"},[e("button",{onClick:p,class:"bg-gray-500 hover:bg-gray-700 w-full mt-2 text-white font-bold py-2 px-4 rounded transition duration-200"}," Clear Search ")])])])])])])):l("",!0)])])]}),_:1})],64)}}};export{Ee as default};
