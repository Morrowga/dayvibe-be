import{k as b,l as M,r as f,o as V,f as h,b as s,a as l,w as u,d as k,F as z,C as O,e as F,T as Z,u as r,Z as G,t as H}from"./app-Dt5ojgsc.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as P,a as C}from"./InputLabel-ByFSeF_o.js";import{_ as K}from"./AuthenticatedLayout-Cl5gMovQ.js";const Q={class:"file-upload-card"},W={key:0,class:"icon-wrapper"},X={key:1,class:"image-preview-container"},Y=["src"],ee=["onClick"],te={__name:"MultipleFileUploadCard",props:{previewUrls:{type:Array,default:()=>[]},media:{type:Array}},emits:["filesSelected","previewsChange","updateDeleteImages"],setup(T,{emit:e}){const p=T,n=b([...p.previewUrls]),t=b(null),v=b({images:[]}),g=e,L=()=>{t.value.click()};M(()=>p.previewUrls,i=>{n.value=[...i]});const $=i=>{const o=i.target.files;if(o.length){const m=Array.from(o).map(c=>({file:c,url:URL.createObjectURL(c)}));n.value=[...n.value,...m],v.value.images=[...v.value.images,...Array.from(o)],g("filesSelected",Array.from(o)),g("previewsChange",n.value)}},U=i=>{i.currentTarget.classList.add("drag-over")},S=i=>{i.currentTarget.classList.remove("drag-over")},D=i=>{i.currentTarget.classList.remove("drag-over");const o=i.dataTransfer.files;if(o.length){const m=Array.from(o).map(c=>({file:c,url:URL.createObjectURL(c)}));n.value=[...n.value,...m],v.value.images=[...v.value.images,...Array.from(o)],g("filesSelected",Array.from(o)),g("previewsChange",n.value)}},I=(i,o)=>{const m=n.value.splice(i,1)[0];g("previewsChange",n.value);const c=m.file;v.value.images=v.value.images.filter(w=>w!==c),g("filesSelected",v.value.images);let y=p==null?void 0:p.media.find(w=>w.original_url===o);g("updateDeleteImages",y.id)};return(i,o)=>{const m=f("v-icon");return V(),h("div",Q,[s("div",{class:"upload-area",onDragover:F(U,["prevent"]),onDragleave:F(S,["prevent"]),onDrop:F(D,["prevent"])},[s("div",{class:"upload-icon",onClick:L},[l(m,null,{default:u(()=>o[0]||(o[0]=[k("mdi-upload")])),_:1})]),s("input",{type:"file",ref_key:"fileInput",ref:t,accept:"image/*",class:"file-input",onChange:$,multiple:""},null,544),n.value.length?(V(),h("div",X,[(V(!0),h(z,null,O(n.value,(c,y)=>(V(),h("div",{key:y,class:"image-preview"},[s("img",{src:c.url,alt:"Uploaded Image"},null,8,Y),s("div",{class:"remove-icon",onClick:w=>I(y,c.url)},[l(m,null,{default:u(()=>o[2]||(o[2]=[k("mdi-delete")])),_:1})],8,ee)]))),128))])):(V(),h("div",W,o[1]||(o[1]=[s("p",null,"Drag and drop images or click the upload icon",-1)])))],32)])}}},le=J(te,[["__scopeId","data-v-bb52712b"]]),se={class:"py-12"},ae={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"d-flex justify-start"},re={style:{width:"100%"}},ie={class:"d-flex justify-start"},ne={style:{width:"100%"}},de={style:{width:"100%"}},ue={class:"d-flex justify-start"},ce={style:{width:"100%"}},me={class:"d-flex justify-start"},_e={style:{width:"100%"}},ve={class:"d-flex justify-start"},ge={class:"my-5 d-flex justify-end"},Ve={__name:"CreateEdit",props:["store_product","categories","sizes"],setup(T){var U,S,D,I,i,o,m,c,y,w;const e=T;console.log((U=e==null?void 0:e.store_product)==null?void 0:U.og_image_urls);const p=b(!1),n=b(((D=(S=e==null?void 0:e.store_product)==null?void 0:S.og_image_urls)==null?void 0:D.length)>0?(I=e==null?void 0:e.store_product)==null?void 0:I.og_image_urls:[]),t=Z({name:((i=e==null?void 0:e.store_product)==null?void 0:i.name)??"",price:((o=e==null?void 0:e.store_product)==null?void 0:o.price)??"700",stock:((m=e==null?void 0:e.store_product)==null?void 0:m.stock)??99999,active:((c=e==null?void 0:e.store_product)==null?void 0:c.active)??!0,category_id:((y=e==null?void 0:e.store_product)==null?void 0:y.category_id)??"",has_size:((w=e==null?void 0:e.store_product)==null?void 0:w.has_size)??!1,delete_images:[],images:null});console.log(e==null?void 0:e.store_product);const v=_=>{t.images=_,console.log(t.images)},g=_=>{n.value=_},L=()=>{p.value=!0;const _=!!(e!=null&&e.store_product),a=_?route("store-products.update",e.store_product.id)+"?_method=PUT":route("store-products.store");t.post(a,{preserveScroll:!0,onSuccess:()=>{t.reset(),_||(n.value=[])},onError:x=>{console.error("Form submission error:",x)}})},$=_=>{console.log("updateDeleteImages called with ID:",_),t.delete_images.push(_),console.log("Current delete_images array:",t.delete_images)};return(_,a)=>{const x=f("VTextField"),A=f("VCol"),B=f("VSelect"),j=f("v-checkbox"),R=f("VRow"),q=f("VBtn"),E=f("VCardText"),N=f("VCard");return V(),h(z,null,[l(r(G),{title:"Store Product"}),l(K,null,{header:u(()=>a[6]||(a[6]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Store Product",-1)])),default:u(()=>[s("div",se,[s("div",ae,[l(N,null,{default:u(()=>[l(E,{style:{padding:"2rem"}},{default:u(()=>[s("form",{onSubmit:F(L,["prevent"]),enctype:"multipart/form-data"},[l(R,null,{default:u(()=>[l(A,{cols:"6",class:"py-0"},{default:u(()=>[s("div",oe,[s("div",re,[l(P,null,{default:u(()=>a[7]||(a[7]=[k("Name")])),_:1}),l(x,{density:"compact",variant:"outlined",id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(t).name,"onUpdate:modelValue":a[0]||(a[0]=d=>r(t).name=d),required:""},null,8,["modelValue"])])]),l(C,{class:"my-2",message:r(t).errors.name},null,8,["message"]),s("div",ie,[s("div",ne,[s("div",de,[l(P,null,{default:u(()=>a[8]||(a[8]=[k("Price")])),_:1}),l(x,{density:"compact",variant:"outlined",id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(t).price,"onUpdate:modelValue":a[1]||(a[1]=d=>r(t).price=d),required:""},null,8,["modelValue"])]),l(C,{class:"my-2",message:r(t).errors.price},null,8,["message"])])]),s("div",ue,[s("div",ce,[l(P,null,{default:u(()=>a[9]||(a[9]=[k("Stock")])),_:1}),l(x,{density:"compact",variant:"outlined",id:"stock",type:"number",class:"mt-1 block w-full",modelValue:r(t).stock,"onUpdate:modelValue":a[2]||(a[2]=d=>r(t).stock=d),required:""},null,8,["modelValue"])])]),l(C,{class:"mt-2",message:r(t).errors.stock},null,8,["message"])]),_:1}),l(A,{cols:"6"},{default:u(()=>[l(C,{class:"my-2",message:r(t).errors.title},null,8,["message"]),s("div",me,[s("div",_e,[l(B,{modelValue:r(t).category_id,"onUpdate:modelValue":a[3]||(a[3]=d=>r(t).category_id=d),id:"sizes",class:"mt-3",variant:"outlined",density:"compact",required:"","hide-details":"",items:e==null?void 0:e.categories,"item-value":"id","item-title":"name_en"},null,8,["modelValue","items"]),l(C,{class:"my-2",message:r(t).errors.category_id},null,8,["message"])])]),s("div",null,[l(j,{modelValue:r(t).has_size,"onUpdate:modelValue":a[4]||(a[4]=d=>r(t).has_size=d),label:"Size","false-value":!1,"true-value":!0},null,8,["modelValue"])]),s("div",ve,[s("div",null,[l(j,{modelValue:r(t).active,"onUpdate:modelValue":a[5]||(a[5]=d=>r(t).active=d),label:"Active","false-value":!1,"true-value":!0},null,8,["modelValue"])])])]),_:1}),l(A,{cols:"12",class:"py-0"},{default:u(()=>{var d;return[l(le,{onUpdateDeleteImages:$,onFilesSelected:v,media:(d=e==null?void 0:e.store_product)==null?void 0:d.media,onPreviwChange:g,previewUrls:n.value},null,8,["media","previewUrls"])]}),_:1})]),_:1}),s("div",ge,[l(q,{type:"submit",color:"primary",disabled:p.value},{default:u(()=>[k(H(e!=null&&e.store_product?"Update":"Create"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])])]),_:1})],64)}}};export{Ve as default};
