import{k as F,l as N,r as f,o as y,f as w,b as s,a as l,w as u,d as V,F as j,C as M,e as T,T as O,u as r,Z,t as G}from"./app-ddjbEfWL.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as A,a as x}from"./InputLabel-bQJew0bs.js";import{_ as J}from"./AuthenticatedLayout-D8rpeWvk.js";const K={class:"file-upload-card"},Q={key:0,class:"icon-wrapper"},W={key:1,class:"image-preview-container"},X=["src"],Y=["onClick"],ee={__name:"MultipleFileUploadCard",props:{previewUrls:{type:Array,default:()=>[]},media:{type:Array}},emits:["filesSelected","previewsChange","updateDeleteImages"],setup(I,{emit:e}){const _=I,t=F([..._.previewUrls]),k=F(null),v=F({images:[]}),g=e,L=()=>{k.value.click()};N(()=>_.previewUrls,i=>{t.value=[...i]});const C=i=>{const a=i.target.files;if(a.length){const m=Array.from(a).map(c=>({file:c,url:URL.createObjectURL(c)}));t.value=[...t.value,...m],v.value.images=[...v.value.images,...Array.from(a)],g("filesSelected",Array.from(a)),g("previewsChange",t.value)}},U=i=>{i.currentTarget.classList.add("drag-over")},b=i=>{i.currentTarget.classList.remove("drag-over")},S=i=>{i.currentTarget.classList.remove("drag-over");const a=i.dataTransfer.files;if(a.length){const m=Array.from(a).map(c=>({file:c,url:URL.createObjectURL(c)}));t.value=[...t.value,...m],v.value.images=[...v.value.images,...Array.from(a)],g("filesSelected",Array.from(a)),g("previewsChange",t.value)}},D=(i,a)=>{const m=t.value.splice(i,1)[0];g("previewsChange",t.value);const c=m.file;v.value.images=v.value.images.filter(n=>n!==c),g("filesSelected",v.value.images);let p=_==null?void 0:_.media.find(n=>n.original_url===a);g("updateDeleteImages",p.id)};return(i,a)=>{const m=f("v-icon");return y(),w("div",K,[s("div",{class:"upload-area",onDragover:T(U,["prevent"]),onDragleave:T(b,["prevent"]),onDrop:T(S,["prevent"])},[s("div",{class:"upload-icon",onClick:L},[l(m,null,{default:u(()=>a[0]||(a[0]=[V("mdi-upload")])),_:1})]),s("input",{type:"file",ref_key:"fileInput",ref:k,accept:"image/*",class:"file-input",onChange:C,multiple:""},null,544),t.value.length?(y(),w("div",W,[(y(!0),w(j,null,M(t.value,(c,p)=>(y(),w("div",{key:p,class:"image-preview"},[s("img",{src:c.url,alt:"Uploaded Image"},null,8,X),s("div",{class:"remove-icon",onClick:n=>D(p,c.url)},[l(m,null,{default:u(()=>a[2]||(a[2]=[V("mdi-delete")])),_:1})],8,Y)]))),128))])):(y(),w("div",Q,a[1]||(a[1]=[s("p",null,"Drag and drop images or click the upload icon",-1)])))],32)])}}},te=H(ee,[["__scopeId","data-v-bb52712b"]]),le={class:"py-12"},se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"d-flex justify-start"},ae={style:{width:"100%"}},re={class:"d-flex justify-start"},ie={style:{width:"100%"}},ne={style:{width:"100%"}},de={class:"d-flex justify-start"},ue={style:{width:"100%"}},ce={class:"d-flex justify-start"},me={style:{width:"100%"}},_e={class:"d-flex justify-start"},ve={class:"my-5 d-flex justify-end"},we={__name:"CreateEdit",props:["store_product","categories","sizes"],setup(I){var C,U,b,S,D,i,a,m,c,p;const e=I;console.log((C=e==null?void 0:e.store_product)==null?void 0:C.image_urls);const _=F(((b=(U=e==null?void 0:e.store_product)==null?void 0:U.image_urls)==null?void 0:b.length)>0?(S=e==null?void 0:e.store_product)==null?void 0:S.image_urls:[]),t=O({name:((D=e==null?void 0:e.store_product)==null?void 0:D.name)??"",price:((i=e==null?void 0:e.store_product)==null?void 0:i.price)??"700",stock:((a=e==null?void 0:e.store_product)==null?void 0:a.stock)??99999,active:((m=e==null?void 0:e.store_product)==null?void 0:m.active)??!0,category_id:((c=e==null?void 0:e.store_product)==null?void 0:c.category_id)??"",has_size:((p=e==null?void 0:e.store_product)==null?void 0:p.has_size)??!1,delete_images:[],images:null});console.log(e==null?void 0:e.store_product);const k=n=>{t.images=n,console.log(t.images)},v=n=>{_.value=n},g=()=>{const n=!!(e!=null&&e.store_product),o=n?route("store-products.update",e.store_product.id)+"?_method=PUT":route("store-products.store");t.post(o,{preserveScroll:!0,onSuccess:()=>{t.reset(),n||(_.value=[])},onError:h=>{console.error("Form submission error:",h)}})},L=n=>{t.delete_images.push(n),console.log(t.delete_images)};return(n,o)=>{const h=f("VTextField"),$=f("VCol"),z=f("VSelect"),P=f("v-checkbox"),B=f("VRow"),R=f("VBtn"),q=f("VCardText"),E=f("VCard");return y(),w(j,null,[l(r(Z),{title:"Store Product"}),l(J,null,{header:u(()=>o[6]||(o[6]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Store Product",-1)])),default:u(()=>[s("div",le,[s("div",se,[l(E,null,{default:u(()=>[l(q,{style:{padding:"2rem"}},{default:u(()=>[s("form",{onSubmit:T(g,["prevent"]),enctype:"multipart/form-data"},[l(B,null,{default:u(()=>[l($,{cols:"6",class:"py-0"},{default:u(()=>[s("div",oe,[s("div",ae,[l(A,null,{default:u(()=>o[7]||(o[7]=[V("Name")])),_:1}),l(h,{density:"compact",variant:"outlined",id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(t).name,"onUpdate:modelValue":o[0]||(o[0]=d=>r(t).name=d),required:""},null,8,["modelValue"])])]),l(x,{class:"my-2",message:r(t).errors.name},null,8,["message"]),s("div",re,[s("div",ie,[s("div",ne,[l(A,null,{default:u(()=>o[8]||(o[8]=[V("Price")])),_:1}),l(h,{density:"compact",variant:"outlined",id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(t).price,"onUpdate:modelValue":o[1]||(o[1]=d=>r(t).price=d),required:""},null,8,["modelValue"])]),l(x,{class:"my-2",message:r(t).errors.price},null,8,["message"])])]),s("div",de,[s("div",ue,[l(A,null,{default:u(()=>o[9]||(o[9]=[V("Stock")])),_:1}),l(h,{density:"compact",variant:"outlined",id:"stock",type:"number",class:"mt-1 block w-full",modelValue:r(t).stock,"onUpdate:modelValue":o[2]||(o[2]=d=>r(t).stock=d),required:""},null,8,["modelValue"])])]),l(x,{class:"mt-2",message:r(t).errors.stock},null,8,["message"])]),_:1}),l($,{cols:"6"},{default:u(()=>[l(x,{class:"my-2",message:r(t).errors.title},null,8,["message"]),s("div",ce,[s("div",me,[l(z,{modelValue:r(t).category_id,"onUpdate:modelValue":o[3]||(o[3]=d=>r(t).category_id=d),id:"sizes",class:"mt-3",variant:"outlined",density:"compact",required:"","hide-details":"",items:e==null?void 0:e.categories,"item-value":"id","item-title":"name_en"},null,8,["modelValue","items"]),l(x,{class:"my-2",message:r(t).errors.category_id},null,8,["message"])])]),s("div",null,[l(P,{modelValue:r(t).has_size,"onUpdate:modelValue":o[4]||(o[4]=d=>r(t).has_size=d),label:"Size","false-value":!1,"true-value":!0},null,8,["modelValue"])]),s("div",_e,[s("div",null,[l(P,{modelValue:r(t).active,"onUpdate:modelValue":o[5]||(o[5]=d=>r(t).active=d),label:"Active","false-value":!1,"true-value":!0},null,8,["modelValue"])])])]),_:1}),l($,{cols:"12",class:"py-0"},{default:u(()=>{var d;return[l(te,{onUpdateDeleteImages:L,onFilesSelected:k,media:(d=e==null?void 0:e.store_product)==null?void 0:d.media,onPreviwChange:v,previewUrls:_.value},null,8,["media","previewUrls"])]}),_:1})]),_:1}),s("div",ve,[l(R,{type:"submit",color:"primary"},{default:u(()=>[V(G(e!=null&&e.store_product?"Update":"Create"),1)]),_:1})])],32)]),_:1})]),_:1})])])]),_:1})],64)}}};export{we as default};
